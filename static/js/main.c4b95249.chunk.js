(this["webpackJsonpcharades-app"]=this["webpackJsonpcharades-app"]||[]).push([[0],{49:function(n,e,t){n.exports=t(94)},87:function(n,e){},94:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t(40),i=t(4),o=t(3),c=t(2);function u(){var n=Object(o.a)([""]);return u=function(){return n},n}var l=c.default.div(u()),f=function(n){var e=n.children;return r.createElement(l,null,e)},d=t(43);function s(){var n=Object(o.a)(["\n  ",'\n\n  * {\n    margin: 0;\n    padding: 0;\n    outline: 0;\n    box-sizing: border-box;\n  }\n\n  :root {\n    --main-font: "Roboto", sans-serif;\n    --title-font: "Roboto", sans-serif;\n    --primary: #2B50EF;\n    --secondary: #fff;\n    --warning: #FE2B29;\n    --highlight: #F9F6DF;\n    --text-color: #848B97;\n    --text-color--secondary: #C4C9D5;\n    --title-color: #404346;\n    --link-active: #03a9f4;\n    --link-hover: #2196f3;\n    --border-color: #E3E4EC;\n    --body-bg: #F5F6FA;\n    --block-bg: #fff;\n    --red: #CD4040;\n    --green: #64CA95;\n    --blue: #157efb;\n    --box-shadow: 0 5px 15px -5px rgba(0, 0, 0, 0.1);\n  }\n\n  body,\n  html {\n    font-family: var(--main-font);\n    color: var(--text-color);\n    background-color: var(--body-bg);\n    font-size: 62.5%;\n    line-height: 1.4;\n    font-weight: 400;\n    min-width: 320px;\n    margin-left: auto;\n    margin-right: auto;\n    width: 100%;\n    height: 100%;\n    -webkit-font-smoothing: antialiased;\n  }\n\n  section {\n    font-size: 1.6rem;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4 {\n    font-family: var(--main-font);\n    line-height: 1.1;\n    color: var(--text-color);\n  }\n\n  p {\n    font-family: var(--text-font);\n  }\n\n  button {\n    border: 0;\n  }\n\n  input {\n    border: 0;\n  }\n\n  a {\n    border: 0;\n    transition: 0.2s;\n    text-decoration: none;\n    color: var(--black);\n  }\n\n  a:visited,\n  a:focus,\n  a:active,\n  a:hover {\n    outline: 0 none;\n  }\n\n  img {\n    border: 0;\n  }\n\n  menu,\n  ol,\n  ul {\n    margin: 0;\n    padding: 0;\n  }\n\n  li {\n    list-style-type: none;\n  }\n\n  section,\n  header,\n  footer {\n    font-size: 1.6rem;\n  }\n \n  \n']);return s=function(){return n},n}var m=Object(c.createGlobalStyle)(s(),d.normalize);function b(){var n=Object(o.a)(['\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.35);\n  opacity: 0;\n  z-index: -1;\n  display: flex;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n\n  &[aria-hidden="true"] {\n    opacity: 1;\n    z-index: 999;\n  }\n']);return b=function(){return n},n}var p=c.default.div(b()),v=function(n){return r.createElement(p,n)};function g(){var n=Object(o.a)(["\n  width: 100%;\n  text-align: center;\n  font-size: 1.2rem;\n  line-height: 1;\n  margin-top: 12px;\n"]);return g=function(){return n},n}var h=function(n){var e=n.store,t=n.config,a=n.className,o=t.label,c=t.name,u=t.placeholder,l=t.autofocus,f=t.isDisabled,d=void 0!==f&&f,s=e.$value,m=e.$error,b=e.changed,p=Object(i.a)(s),v=(Object(i.a)(m),{autoFocus:l,value:p,type:c,name:c,placeholder:u,onChange:b});return r.createElement("div",{className:a},o&&r.createElement("label",null,o),r.createElement("input",Object.assign({},v,{disabled:d,autoComplete:"off"})))};c.default.div(g());function x(){var n=Object(o.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  max-height: 230px;\n  border-top: 1px solid var(--border-color);\n  background-color: var(--block-bg);\n  display: flex;\n  align-items: center;\n  min-height: 8vh;\n  transition: 0.3s;\n"]);return x=function(){return n},n}var j=c.default.form(x()),O=function(n){var e=n.handleSubmit,t=n.children;return r.createElement(j,{onSubmit:function(n){n.preventDefault(),e&&e()}},t)},y=t(11);function E(){var n=Object(o.a)(["\n  position: absolute;\n  font-size: 1.6rem;\n  margin: auto;\n  height: calc(100vh - 128px);\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n  padding: 0 36px;\n  text-align: center;\n\n  span {\n    width: 100%;\n    text-align: center;\n    font-size: 3.6rem;\n  }\n"]);return E=function(){return n},n}function w(){var n=Object(o.a)(["\n  width: 70%;\n  padding: 6px 30px 7px 0;\n  font-size: 1.4rem;\n  color: #000;\n"]);return w=function(){return n},n}function k(){var n=Object(o.a)(["\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2rem;\n  border-radius: 3px;\n  background-color: var(--body-bg);\n  letter-spacing: -2px;\n  margin-right: 12px;\n"]);return k=function(){return n},n}function S(){var n=Object(o.a)(["\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  padding-bottom: 0;\n"]);return S=function(){return n},n}function z(){var n=Object(o.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  height: calc(100vh - 128px);\n  padding-top: 18px;\n  padding-bottom: 18px;\n  width: 100%;\n  overflow-y: auto;\n"]);return z=function(){return n},n}function R(){var n=Object(o.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  height: 100%;\n"]);return R=function(){return n},n}var T=c.default.div(R()),C=c.default.div(z()),N=c.default.div(S()),F=c.default.div(k()),L=c.default.div(w()),$=c.default.div(E()),I=function(n){var e=n.name,t=(n.ts,n.msg),a=r.useState(!1),i=Object(y.a)(a,2),o=i[0],c=i[1];return r.useEffect((function(){c(!0)}),[]),r.createElement(N,{"aria-hidden":o},r.createElement(F,null,e),r.createElement(L,null,t))},D=function(){return r.createElement($,null,r.createElement("span",{role:"img","aria-label":"No messages"},"\ud83d\ude42"),"\u0412 \u0447\u0430\u0442\u0435 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u0431\u0443\u0434\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c!")},_=function(n){var e=n.history,t=n.children;return r.createElement(T,null,r.createElement(C,null,e.length>0?e.map((function(n,e){return r.createElement(I,Object.assign({key:e},n))})):r.createElement(D,null)),t)};function A(){var n=Object(o.a)(["\n  width: 100%;\n  min-height: 100vh;\n"]);return A=function(){return n},n}function G(){var n=Object(o.a)(["\n  display: flex;\n"]);return G=function(){return n},n}var U=c.default.div(G()),P=c.default.canvas(A()),V=t(1),W=t(45),B=t.n(W),H=t(5),Y=Object(V.f)(),J=(Object(V.f)(),Object(V.f)()),M=Object(V.g)([]);M.on(J,(function(n,e){return console.log("serverHistory",e),e})),M.on(Y,(function(n,e){return console.log("receiveMsg",e),[e].concat(Object(H.a)(n))}));var X=Object(V.f)(),q=Object(V.f)(),K=Object(V.f)(),Q=Object(V.g)([]),Z=Object(V.g)([]);Q.on(X,(function(n,e){return e})),Z.on(q,(function(n,e){if(!n.includes(e))return[].concat(Object(H.a)(n),[e])})),q.watch(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=0;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return n.apply(void 0,a)}),e)}}(K,1e3)),Z.on(K,(function(n,e){return n.filter((function(n){return n!==e}))}));t(18);var nn=B()("https://sharades-server.herokuapp.com:18957"),en=Object(V.e)({handler:function(n){nn.emit("USER_MESSAGE",n)}}),tn=Object(V.e)({handler:function(){nn.emit("USER_TYPING")}});nn.on("USER_MESSAGE",(function(n){Y(n)})),nn.on("USER_TYPING",(function(n){q(n)})),nn.on("USERS_ONLINE",(function(n){return X(n)})),nn.on("USER_DRAWNING",(function(n){return an(n)})),nn.on("CHAT_HISTORY",(function(n){console.log("object",n),J(n)}));var rn=Object(V.e)(),an=Object(V.f)(),on=Object(V.g)({x1:0,y1:0,x2:0,y2:0});on.on(an,(function(n,e){return e})),rn.use((function(n){nn.emit("USER_DRAWNING",n)}));var cn=window.devicePixelRatio,un=function(n,e,t){var r=t.getContext("2d");r&&(r.strokeStyle="#2b50ef",r.lineJoin="round",r.lineWidth=12,r.beginPath(),r.moveTo(n.x*cn,n.y*cn),r.lineTo(e.x*cn,e.y*cn),r.closePath(),r.stroke())},ln=function(n,e){return{x:n.pageX-e.offsetLeft,y:n.pageY-e.offsetTop}},fn=function(){var n=r.useRef(null),e=Object(i.a)(on),t=r.useState(!1),a=Object(y.a)(t,2),o=a[0],c=a[1],u=r.useState(null),l=Object(y.a)(u,2),f=l[0],d=l[1];r.useEffect((function(){var t=n.current;t&&un({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},t)}),[e]),r.useEffect((function(){var e=n.current;e&&(e.width=e.scrollWidth*cn,e.height=e.scrollHeight*cn)}),[]);var s=r.useCallback((function(e){var t=n.current;if(t){var r=ln(e,t);r&&(c(!0),d(r))}}),[]);r.useEffect((function(){var e=n.current;if(e)return e.addEventListener("mousedown",s),function(){e.removeEventListener("mousedown",s)}}),[s]);var m=r.useCallback((function(e){var t=n.current;if(t&&o){var r=ln(e,t);f&&r&&(un(f,r,t),rn({x1:f.x,y1:f.y,x2:r.x,y2:r.y}),d(r))}}),[o,f]);r.useEffect((function(){var e=n.current;if(e)return e.addEventListener("mousemove",m),function(){e.removeEventListener("mousemove",m)}}),[m]);var b=r.useCallback((function(){c(!1),d(null)}),[]);return r.useEffect((function(){var e=n.current;if(e)return e.addEventListener("mouseup",b),e.addEventListener("mouseleave",b),function(){e.removeEventListener("mouseup",b),e.removeEventListener("mouseleave",b)}}),[b]),r.createElement(U,null,r.createElement(P,{ref:n}))};function dn(){var n=Object(o.a)(['\n  position: relative;\n\n  &:before {\n    content: "\ud83d\udc51";\n    position: absolute;\n    top: -17px;\n    font-size: 3rem;\n    left: auto;\n    right: auto;\n    margin: 0 auto;\n  }\n\n  &:after {\n    content: "";\n    position: absolute;\n    bottom: -16px;\n    width: 100%;\n    height: 1px;\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  width: 5.6rem;\n  height: 5.6rem;\n  font-size: 3.6rem;\n  margin-bottom: 24px;\n']);return dn=function(){return n},n}function sn(){var n=Object(o.a)(['\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 3.6rem;\n  height: 3.6rem;\n  background: rgba(0, 0, 0, 0.1);\n  margin: 0.6rem;\n  border-radius: 3px;\n  font-size: 2.4rem;\n  letter-spacing: -2px;\n  position: relative;\n\n  &:before {\n    content: "\ud83d\udcac";\n    position: absolute;\n    top: -8px;\n    right: -12px;\n    font-size: 1.6rem;\n    transition: 0.3s;\n  }\n\n  &[data-typing="false"] {\n    &:before {\n      opacity: 0;\n    }\n  }\n\n  &[data-typing="true"] {\n    &:before {\n      opacity: 1;\n    }\n  }\n']);return sn=function(){return n},n}function mn(){var n=Object(o.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  padding: 12px;\n"]);return mn=function(){return n},n}var bn=c.default.div(mn()),pn=c.default.div(sn()),vn=Object(c.default)(pn)(dn()),gn=function(n){var e=n.users,t=n.typing,a=n.host;return r.createElement(bn,null,r.createElement(vn,null,a),e.map((function(n,e){var a=n.name,i=n.id;return r.createElement(pn,{key:e,"data-typing":t.includes(i)},a)})))};function hn(){var n=Object(o.a)(['\n  margin-top: 24px;\n  font-size: 1.6rem;\n  line-height: 3.6rem;\n  background-color: var(--primary);\n  color: #fff;\n  padding: 0 24px;\n  border-radius: 3px;\n\n  &[data-disabled="true"] {\n    opacity: 0.7;\n  }\n']);return hn=function(){return n},n}function xn(){var n=Object(o.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  background-color: var(--block-bg);\n  border-radius: 6px;\n  padding: 24px;\n  max-width: 350px;\n"]);return xn=function(){return n},n}var jn=c.default.form(xn()),On=c.default.button(hn()),yn=function(n){var e=n.children,t=n.isError,a=void 0!==t&&t,i=n.handleSubmit,o=n.isLoading,c=void 0!==o&&o;return r.createElement(jn,{onSubmit:function(n){n.preventDefault(),i&&i(n)},"aria-disabled":c},e,r.createElement(On,{type:"submit",name:"submit","data-disabled":a},"\u0412\u043e\u0439\u0442\u0438"))};function En(){var n=Object(o.a)(['\n  font-size: 1.4rem;\n  line-height: 1em;\n  min-height: 5vh;\n  background-color: var(--primary);\n  color: #fff;\n  padding: 0 12px;\n  border-radius: 3px;\n  position: absolute;\n  right: 12px;\n  transition: 0.3s;\n\n  &[aria-disabled="true"] {\n    opacity: 0.7;\n  }\n\n  &[aria-disabled="false"] {\n    opacity: 1;\n  }\n']);return En=function(){return n},n}function wn(){var n=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 3.6rem;\n  height: 3.6rem;\n  background-color: rgba(0, 0, 0, 0.05);\n  border-radius: 3px;\n  font-size: 2.4rem;\n  letter-spacing: -2px;\n  position: absolute;\n  z-index: 100;\n  top: 12px;\n  left: 12px;\n"]);return wn=function(){return n},n}function kn(){var n=Object(o.a)(["\n  font-size: 1.6rem;\n  line-height: 8vh;\n  padding: 0 24px 0 60px;\n  width: 100%;\n"]);return kn=function(){return n},n}function Sn(){var n=Object(o.a)(["\n  width: 96px;\n  height: calc(100vh - 124px);\n  background-color: var(--primary);\n  position: absolute;\n  right: 0;\n  margin: 62px 36px;\n  border-radius: 0 5px 5px 0;\n  box-shadow: var(--box-shadow);\n"]);return Sn=function(){return n},n}function zn(){var n=Object(o.a)(["\n  width: 100%;\n  max-width: 320px;\n  height: calc(100vh - 72px);\n  background-color: var(--block-bg);\n  position: absolute;\n  right: 96px;\n  top: 0;\n  bottom: 0;\n  margin: 36px;\n  border-radius: 5px;\n  box-shadow: var(--box-shadow);\n  z-index: 100;\n"]);return zn=function(){return n},n}function Rn(){var n=Object(o.a)(["\n  width: 100%;\n  min-height: 100vh;\n  position: relative;\n"]);return Rn=function(){return n},n}function Tn(){var n=Object(o.a)(["\n  display: flex;\n"]);return Tn=function(){return n},n}var Cn=c.default.div(Tn()),Nn=c.default.main(Rn()),Fn=c.default.aside(zn()),Ln=c.default.div(Sn()),$n=Object(c.default)(h)(kn()),In=c.default.div(wn()),Dn=c.default.input(En()),_n=Object(V.e)();_n.use((function(n){return e={name:n},void nn.emit("INIT_SESSION",e);var e}));var An=Object(V.g)({name:null});An.on(_n,(function(n,e){return{name:e}}));var Gn=t(8),Un=t(46),Pn=function(n){var e=n.name,t=n.length,r=n.initialValue,a=void 0===r?"":r,i=n.validator,o=n.handleReset,c=Object(V.f)("".concat(e,"Changed")),u=Object(V.g)(a,{name:"".concat(e,"Store")}),l=i?u.map(i):Object(V.g)(null);return u.on(c,(function(n,e){return e.currentTarget.value.substring(0,t)})),o&&u.on(o,(function(){return""})),{name:e,$value:u,$error:l,changed:c}},Vn=function(n){var e=n.name,t=n.fields,r=n.validator||Wn(t);return{name:e,$values:Object(V.b)(t.reduce((function(n,e){var t=e.$value,r=e.name;return Object(Un.a)({},n,{},Object(Gn.a)({},r,t))}),{})),$isValid:r}},Wn=function(n){var e=n.map((function(n){return n.$error}));return Object(V.b)(e,(function(n){return n.every((function(n){return!n}))}))},Bn=Object(V.f)(),Hn=Object(V.f)(),Yn=Object(V.f)(),Jn=Object(V.g)(0),Mn=Object(V.g)(!0),Xn=Pn({name:"message",handleReset:Hn,validator:function(n){return n.length<1?"\u041f\u0443\u0441\u0442\u043e\u0435 \u043f\u043e\u043b\u0435":null}}),qn=Vn({name:"messageForm",fields:[Xn]}),Kn=function(n,e){var t=e.start,r=e.abort,a=void 0===r?Object(V.f)("".concat(n,"Reset")):r,i=e.timeout,o=void 0===i?1e3:i,c=Object(V.f)("".concat(n,"Tick")),u=Object(V.e)("".concat(n,"Timer")).use((function(){return n=o,new Promise((function(e){setTimeout(e,n)}));var n})),l=Object(V.g)(!0,{name:"".concat(n,"Working")});return l.on(u,(function(n,e){return e>0})).on(a,(function(){return!1})).on(t,(function(){return!0})),Object(V.j)({source:t,filter:u.pending.map((function(n){return!n})),target:c}),Object(V.i)({from:c,to:u}),Object(V.j)({source:u.done.map((function(n){return n.params-1})),filter:l,target:c}),{tick:c}}("formSubmit",{start:Yn});Jn.on(Kn.tick,(function(n,e){return e})),Mn.on(Kn.tick,(function(n,e){return e<=0}));var Qn=Object(V.b)(Xn.$value,An,(function(n,e){return{name:e.name,ts:(new Date).getTime(),msg:n}})),Zn=Object(V.b)(qn.$isValid,Mn,(function(n,e){return n&&e}));Object(V.j)({source:Object(V.l)(Qn,Bn),filter:Zn,target:en}),Object(V.i)({from:Xn.changed,to:tn}),Object(V.i)({from:en,to:Hn}),Object(V.i)({from:en,to:Yn.prepend((function(){return 5}))});var ne=function(){var n=Object(i.a)(M),e=Object(i.a)(An),t=Object(i.a)(Q),a=Object(i.a)(Z),o=Object(i.a)(Jn),c=Object(i.a)(Zn);return r.createElement(Cn,null,r.createElement(Nn,null,r.createElement(fn,null)),r.createElement(Fn,null,r.createElement(_,{history:n},r.createElement(O,{handleSubmit:function(){Bn()}},r.createElement(In,null,e.name),r.createElement($n,{store:Xn,config:{name:"message",placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",autofocus:!0}}),r.createElement(Dn,{type:"submit",value:o<=0?"Send":"00: 0".concat(o),"aria-disabled":!c})))),r.createElement(Ln,null,r.createElement(gn,{users:t,typing:a,host:"\ud83d\ude31"})))},ee=t(91),te=Object(V.f)(),re=Pn({name:"name",initialValue:ee.random({count:1})[0].character,validator:function(n){return/(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/.test(n)?null:"\u0422\u043e\u043b\u044c\u043a\u043e Emoji"}}),ae=Vn({name:"loginForm",fields:[re]});function ie(){var n=Object(o.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  width: 100%;\n\n  input {\n    text-align: center;\n    width: 64px;\n    height: 64px;\n    font-size: 3.2rem;\n    line-height: 64px;\n    background-color: rgba(0, 0, 0, 0.05);\n    border-radius: 3px;\n    margin: 0 6px;\n    transition: 0.3s;\n    cursor: pointer;\n\n    &:hover {\n      background-color: var(--primary);\n    }\n  }\n\n  label {\n    width: 100%;\n    text-align: center;\n    font-size: 1.6rem;\n    margin-bottom: 12px;\n  }\n"]);return ie=function(){return n},n}function oe(){var n=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n  width: 100%;\n  min-height: 100vh;\n  background-color: var(--primary);\n"]);return oe=function(){return n},n}Object(V.j)({source:Object(V.l)(re.$value,te),filter:ae.$isValid,target:_n});var ce=c.default.div(oe()),ue=Object(c.default)(h)(ie()),le=function(){return r.createElement(ce,null,r.createElement(v,{"aria-hidden":"true"},r.createElement(yn,{handleSubmit:te,isLoading:!1},r.createElement(ue,{store:re,config:{label:"\u0418\u043c\u044f:",name:"name"}}))))};a.render(r.createElement((function(){var n=Object(i.a)(An);return r.createElement(r.Fragment,null,r.createElement(m,null),r.createElement(f,null,n.name?r.createElement(ne,null):r.createElement(le,null)))}),null),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.c4b95249.chunk.js.map